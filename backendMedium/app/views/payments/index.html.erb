<!-- index.html.erb (or any other HTML file) -->
<!DOCTYPE html>
<html>
<head>
  <title>Pay Now</title>
</head>
<body>
  <form id="payment-form" action="/create_payment_intent" method="post">
    <label for="amount">Amount:</label>
    <input type="number" name="amount" id="amount" value="10" min="1" step="1">

    <button type="button" onclick="payNow()">Pay Now</button>
  </form>

  <script>
    function payNow() {
      var amount = document.getElementById('amount').value;

      fetch('/create_payment_intent', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'X-CSRF-Token': document.querySelector('meta[name="csrf-token"]').getAttribute('content')
        },
        body: JSON.stringify({ amount: amount })
      })
      .then(response => response.json())
      .then(data => {
        var stripe = Stripe('YOUR_STRIPE_PUBLISHABLE_KEY');
        stripe.confirmCardPayment(data.client_secret, {
          payment_method: {
            card: {
              // Add card details if required
            }
          }
        })
        .then(result => {
          if (result.error) {
            // Handle payment failure
            console.error(result.error.message);
          } else {
            // Handle payment success
            console.log('Payment successful');
          }
        });
      })
      .catch(error => console.error('Error:', error));
    }
  </script>
</body>
</html>
